**[English version](./README.ENG.MD)**

## Содержание
- [О проекте](#о-проекте)
- [Структура проекта](#структура-проекта)
- [Установка и настройка](#установка-и-настройка)
- [Запуск](#запуск)
- [Проверка](#проверка)
- [Тесты](#тесты)
- [Ваше участие в разработке](#ваше-участие-в-разработке)
- [Автор](#автор)

# О проекте

TimeLogger - это веб-приложение, 
используемое для разбора/сохранения файлов с записями о
логировании времени, экспортированных ранее из других приложений для трекинга 
времени: ``Toggl``, ``TimePlanner``, ``Habitify`` и др.)

-------

## Структура проекта

```
./
├── assets/            - Статические файлы (CSS, JS, изображения)
├── cgi-bin/           - CGI-скрипты для обработки запросов
├── common/            - Общие функции и утилиты
├── config/            - Конфигурационные файлы
├── db/                - База данных и файлы, связанные с БД
├── files/             - Загруженные файлы
├── import/            - Файлы импорта из других приложений
├── scripts/           - Вспомогательные скрипты
├── tests/             - Тестовые скрипты и файлы
└── tmp/               - Временные файлы
```

-------

## Установка и настройка

### Установка автоматическая

Выполните команду:
```bash
make setup
```

### Установка вручную

Обновите pip:
```bash
pip install --upgrade pip
python -m pip install --upgrade pip
```

Сначала установите необходимые модули:
```bash
pip install --upgrade google-api-python-client
pip install bs4
pip install wheel
pip install lxml
```

## Запуск

### Запуск автоматический

Выполните команду:
```bash
make run
```

### Запуск вручную

Запустите локальный HTTP веб-сервер:
```bash
python -m http.server
```

## Проверка

Откройте страницу загрузки файлов: http://localhost:8000/upload.py
ИЛИ (если вы используете WAMP/OSPanel): http://timelogger/upload.py

Загрузите файл (импортированный из других приложений) через форму загрузки. 
Парсинг файла запустится автоматически. 

Все события, сохраненные в файле, будут:
- сохранены в локальную БД
- добавлены в ваш календарь Google (опицонально)

-------

## Тесты

Проект включает следующие тесты:

- `test_convert_tp_date.py` - тесты функций преобразования дат из различных форматов
- `test_exp.py` - тесты работы с регулярными выражениями
- `test_gcalexport.py` - тесты класса GcalExport для работы с Google Calendar API
- `test_logger.py` - тесты класса TimeLogger для логирования событий
- `test_roundtime.py` - тесты функций округления времени

### Запуск тестов

#### Запуск всех тестов

```bash
make test
```

или

```bash
python3 -m pytest tests/ -v
```

#### Запуск конкретного теста

```bash
python3 -m pytest tests/test_roundtime.py -v
```

-------

## История изменений

### v0.1.0
- MVP версия:
-- чтение данных из TimePlanner
-- сохранение данных в локальную БД
-- добавление данных в Google Calendar

### v0.2.0 (август 2025)
-- рефакторинг 

-------

## Ваше участие в разработке

Ваши pull запросы приветствуются.

Для крупных изменений, пожалуйста, сначала откройте issue для обсуждения того, 
что вы хотели бы изменить. 

Мои контакты ниже.

## Автор
Иконников Михаил [mishaikon@gmail.com](mailto:mishaikon@gmail.com)